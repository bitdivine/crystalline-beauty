{
  "kind": "build_request",
  "title": "Switch back to snow effect background",
  "projectName": "Crystalline Beauty",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-8",
      "text": "Replace the RainBackground component import and usage in frontend/src/App.tsx with SnowfallBackground so the snow effect renders behind the existing header/hero/gallery/footer content",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-switch-back"
        ]
      },
      "acceptanceCriteria": [
        "App.tsx imports SnowfallBackground instead of RainBackground",
        "The SnowfallBackground component is rendered in the background layer (fixed, z-0) while main content remains in z-10",
        "The rain effect is no longer visible; snow particles animate on the canvas background"
      ]
    },
    {
      "id": "REQ-9",
      "text": "Restore or implement the full SnowfallBackground component in frontend/src/components/SnowfallBackground.tsx with canvas-based animated snow particles following the same performance and accessibility patterns as RainBackground: device-pixel-ratio scaling, resize handling, particle density caps (min 40, max 250, density calculation based on viewport area), and prefers-reduced-motion support (static display when reduced motion is preferred)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-switch-back"
        ]
      },
      "acceptanceCriteria": [
        "SnowfallBackground.tsx exports a functional React component rendering a fixed full-viewport canvas",
        "Snow particles are animated using requestAnimationFrame with vertical falling motion and optional subtle horizontal drift",
        "Canvas scales appropriately for device pixel ratio and responds to window resize events",
        "Particle count is calculated from viewport area with minimum 40 and maximum 250 particles enforced",
        "When prefers-reduced-motion is enabled, animation stops and particles render statically",
        "Snow particles have soft glow appearance consistent with the winter theme"
      ]
    }
  ],
  "constraints": [
    "Do not modify the immutable paths: frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, frontend/src/components/ui",
    "Preserve all existing header, hero, gallery, and footer components without modification",
    "Maintain the winter OKLCH theme tokens and Tailwind styling already in place"
  ],
  "nonGoals": [
    "Modifying the RainBackground component (it should remain as-is for potential future use)",
    "Changing the HailBackground placeholder file",
    "Altering the gallery images or modal dialog functionality",
    "Updating theme colors or design tokens"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}